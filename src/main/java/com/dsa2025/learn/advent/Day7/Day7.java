package com.dsa2025.learn.advent.Day7;

import java.util.HashSet;
import java.util.Set;

public class Day7 {

    public static int countSplits(String[] grid) {

        int rows = grid.length;
        int cols = grid[0].length();

        int col = 0;

        for (col = 0; col < grid[0].length(); col++) {
            if (grid[0].charAt(col) == 'S') {
               break;
            }
        }

        int splits = 0;
        Set<Integer> currentBeams = new HashSet<>();
        currentBeams.add(col);

        for (int r = 1; r < rows; r++) {
            Set<Integer> nextBeams = new HashSet<>();

            for (int c : currentBeams) {
                if (c < 0 || c >= cols) continue;
                char cell = grid[r].charAt(c);

                if (cell == '.') {
                    nextBeams.add(c);
                } else if (cell == '^') {
                    splits++;
                    nextBeams.add(c - 1);
                    nextBeams.add(c + 1);
                }
            }

            if (nextBeams.isEmpty()) break;
            currentBeams = nextBeams;
        }

        return splits;
    }

    public static void main(String[] args) {
        String[] example1 = {
                ".......S.......",
                "...............",
                ".......^.......",
                "...............",
                "......^.^......",
                "...............",
                ".....^.^.^.....",
                "...............",
                "....^.^...^....",
                "...............",
                "...^.^...^.^...",
                "...............",
                "..^...^.....^..",
                "...............",
                ".^.^.^.^.^...^.",
                "..............."
        };
        String[] example = {
                        "......................................................................S......................................................................",
                        ".............................................................................................................................................",
                        "......................................................................^......................................................................",
                        ".............................................................................................................................................",
                        ".....................................................................^.^.....................................................................",
                        ".............................................................................................................................................",
                        "....................................................................^.^.^....................................................................",
                        ".............................................................................................................................................",
                        "...................................................................^.^.^.^...................................................................",
                        ".............................................................................................................................................",
                        "..................................................................^...^.^.^..................................................................",
                        ".............................................................................................................................................",
                        ".................................................................^...^.^.^.^.................................................................",
                        ".............................................................................................................................................",
                        "................................................................^.^.........^................................................................",
                        ".............................................................................................................................................",
                        "...............................................................^.^.^.^.......^...............................................................",
                        ".............................................................................................................................................",
                        "..............................................................^.^...^.....^...^..............................................................",
                        ".............................................................................................................................................",
                        ".............................................................^.....^.^.^.^.^...^.............................................................",
                        ".............................................................................................................................................",
                        "............................................................^.^...^...^.^.^.^.^.^............................................................",
                        ".............................................................................................................................................",
                        "...........................................................^.^...^.^.^...^.^.^.^.^...........................................................",
                        ".............................................................................................................................................",
                        "..........................................................^.^.^.^.^.......^.^.^.^.^..........................................................",
                        ".............................................................................................................................................",
                        ".........................................................^...^.^.^...^.^.....^.....^.........................................................",
                        ".............................................................................................................................................",
                        "........................................................^.^.^.^...^.^.^...^...^.^...^........................................................",
                        ".............................................................................................................................................",
                        ".......................................................^...^.^.^.....^...^.^.^.^...^.^.......................................................",
                        ".............................................................................................................................................",
                        "......................................................^.....^.^.^.^.^...^.^...^.^.^.^.^......................................................",
                        ".............................................................................................................................................",
                        ".....................................................^.^...^.^.^.^.^...^.^.^...^...^.^.^.....................................................",
                        ".............................................................................................................................................",
                        "....................................................^.....^.^.^.^.^.^.^.^.^...^.^...^.^.^....................................................",
                        ".............................................................................................................................................",
                        "...................................................^.......^.^...^...^.^...^.^.^...^.^.^.^...................................................",
                        ".............................................................................................................................................",
                        "..................................................^.^.^.^.^.^.^...^...^.......^.....^.^.^.^..................................................",
                        ".............................................................................................................................................",
                        ".................................................^...^.^...........^.^.....^.^.^.........^.^.................................................",
                        ".............................................................................................................................................",
                        "................................................^.^.....^.^...^.^.^.......^.^.^...^.^.^.^.^.^................................................",
                        ".............................................................................................................................................",
                        "...............................................^.^.^.^.^.^.....^.^.^.......^.^...^.^.^...^.^.^...............................................",
                        ".............................................................................................................................................",
                        "..............................................^.^.^.....^...^...^.^.^.....^...........^.^.^.^.^..............................................",
                        ".............................................................................................................................................",
                        ".............................................^.^.....^.^.......^...^.^.^.^.^.^.^.....^.......^.^.............................................",
                        ".............................................................................................................................................",
                        "............................................^...^.^.^.^.^.^.^.^...^.^...^.^.......^.^.....^.^.^.^............................................",
                        ".............................................................................................................................................",
                        "...........................................^.^.^.^.^...^.^...^.^.^.^.^.^.^.^.^.....^.^.^.......^.^...........................................",
                        ".............................................................................................................................................",
                        "..........................................^.^...^.^...^.^.^...^.^...^.^.^.^.^...^.^...^.^.^.....^.^..........................................",
                        ".............................................................................................................................................",
                        ".........................................^...^...^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.^...^.^...^...^.^.........................................",
                        ".............................................................................................................................................",
                        "........................................^.^.....^.^.^.^...^.^...^.^.^.^.^.^.^...^...^...^.....^.^.^.^........................................",
                        ".............................................................................................................................................",
                        ".......................................^.^...^.....^.^.^.^...^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.......................................",
                        ".............................................................................................................................................",
                        "......................................^.^...^.^.....^.^...^.^.^.^...^.^.^.^.....^.^...^.^.^...^.......^......................................",
                        ".............................................................................................................................................",
                        ".....................................^.^.^...^.^.^.......^...^.^.^.^.^...^.^.^...^.^.....^.^.........^.^.....................................",
                        ".............................................................................................................................................",
                        "....................................^...^.....^.^...^.^.......^.^.....^.....^.^...^...^.^.^...^.^.....^.^....................................",
                        ".............................................................................................................................................",
                        "...................................^.....^.^.^.^.^.^.^...^.^...^.^...^...^...^.^.^...^.^.^.^...^.^.^.^.^.^...................................",
                        ".............................................................................................................................................",
                        "..................................^.^.^...^.^...^.^.^.......^.^...^.^.^...^.^.^.^.^.....^.^.^.^...^.^.^.^.^..................................",
                        ".............................................................................................................................................",
                        ".................................^.^.^.....^.....^...^...^.^.^.^.^.^.^.^...^.^.^.^...^...^.^...^.^...^.....^.................................",
                        ".............................................................................................................................................",
                        "................................^.........^...^...^.^.^.^...^.^...^.^.......^.^.^.^.^.^.^.^.^.^.............^................................",
                        ".............................................................................................................................................",
                        "...............................^...^.^...^.^.^...^.^.^.....^...^...^...^...^.^.^.^.....^...^.^.^.^.^.^...^.^.^...............................",
                        ".............................................................................................................................................",
                        "..............................^.^.^.^.^.^.....^.^.^...^...^.^.^...........^.^...^.^.^.^.^...^.^.^.^.....^.^...^..............................",
                        ".............................................................................................................................................",
                        ".............................^...^.^.^...^.^...^...^.^.....^.^.^...^.^.^...^...^.^.^...^.^.^.^.^.^.^.^...^.^.^.^.............................",
                        ".............................................................................................................................................",
                        "............................^...^...^...^.^.^...^...^...^.^...^.^.^.^.^.^.^.^...^.^.^.^.^...^.^...^.^.....^.^.^.^............................",
                        ".............................................................................................................................................",
                        "...........................^.^...^.^...^...^.^.^.^...^.^.^.^.^...^.^...^.^.^...^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^...........................",
                        ".............................................................................................................................................",
                        "..........................^.....^.^.^...^...^.^.^...^.^.^.^.^.^.^.^.^...^.^.....^.^.......^.....^.^.^.^.^.^.^.^.^.^..........................",
                        ".............................................................................................................................................",
                        ".........................^.^.^.^.^.^.^.^...^.^.....^.^.^...^.^.^.^.....^.^.^...^.^...^.^.^.^.^...^.^...^.^.^.^...^.^.........................",
                        ".............................................................................................................................................",
                        "........................^.^.^.^.^.^.^.^.....^.^.^.^...^.^.....^.^.^.^.^.^.^.^.^.^.^.....^.....^.^.....^...^.^.......^........................",
                        ".............................................................................................................................................",
                        ".......................^.....^.^.^.^...^.^...^.^.^.^.^.^...^.^.^.^...^...^.^.^.^...^.^.^.......^.^...^.^.^.^.^.^...^.^.......................",
                        ".............................................................................................................................................",
                        "......................^...^...^...^.^...^.^.^.....^.^.^...^.........^.^...^.^.^...^.^...........^.^.^.^.....^.^.....^.^......................",
                        ".............................................................................................................................................",
                        ".....................^...^.^...^.^...^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.....^.^...^.^.^.^.^.^.^.......^.^.^.^.^...^...^.^.....................",
                        ".............................................................................................................................................",
                        "....................^.^.....^.^.^.^.^.^.^.....^.^...^...^.^.^.^.^.^.....^...^.^.^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^...^.^....................",
                        ".............................................................................................................................................",
                        "...................^.^.^.^.^...^.^.^.^...^...^.^.^.....^.....^...^...^.^...^.^.^.^.^...^.....^...^.^...^.^.............^.^...................",
                        ".............................................................................................................................................",
                        "..................^.^.^.^.^.^.^.....^.^...^...^.^.......^.^.^.^.^.^...^.^.^...^.^.^.......^.^.^.^.^.^...^.^.^...^.^...^.^.^..................",
                        ".............................................................................................................................................",
                        ".................^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.^...............^.^...^...^.^.^.....^.^...^.^.^.^.^...^.....^...^...^.^.^.................",
                        ".............................................................................................................................................",
                        "................^.^.^.^...^.^.....^.^.^.^.^.^...^.^.^.^...^...^.....^.^...^.^.^.^...^.^.^...^.^.^.....^.......^.^.^.....^.^.^................",
                        ".............................................................................................................................................",
                        "...............^.^.^.^.^...^.^.^...^.^...^.^.....^...^.^.^...^.....^.^.^.....^.^...^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.......^.^...............",
                        ".............................................................................................................................................",
                        "..............^.^.^.^...^.^.^.^.^.........^.^.......^.^.....^.......^.^.^.^.^.^...^.......^.^.^.^.......^.....^.^...^.....^.^.^..............",
                        ".............................................................................................................................................",
                        ".............^.^...^.^.......^.....^.^.^...^.......^.....^.....^...^.^.^.^.^.^.....^.^.....^.^.^.^.^.^...........^.^.^.^...^...^.............",
                        ".............................................................................................................................................",
                        "............^.^...^...^.^.^.^.^...^...^.......^.....^.^.....^.^...^...^.^.^...^.^...^.....^.....^...^.^.^.^.^.^...^...^.^...^.^.^............",
                        ".............................................................................................................................................",
                        "...........^.....^.^.^.^...^.^.^.^.....^...........^.^.^...^.^.^.^.^.^.....^.^...^.^...^...^...^...^.^.^...^.^.^.^.^.^.^...^.^...^...........",
                        ".............................................................................................................................................",
                        "..........^.^.^.^...^.^.......^.^.^.^...^.^.^.^...^.^.....^.^.^.^...^...^...^.^...^.^...^.^...^.^.^.^.......^.^.^.^.^...^...^.^.^.^..........",
                        ".............................................................................................................................................",
                        ".........^.^.^.^...^.^...^.......^.^...^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.......^...^.....^.^.^...^...^.........^...^.^...^.^.........",
                        ".............................................................................................................................................",
                        "........^.^.^...^...^...^.^.^.^.^.^.^.^.....^.^.^.......^.^.^.^.^.^.^.^.^.^.^...^...^...^.^.^.^...^.^.^.^...^...^.^.^...........^.^.^........",
                        ".............................................................................................................................................",
                        ".......^.^.^.^.^...^.^.^.^...^.^.....^.^.^.^.....^.^.....^.^.......^.^.^.^.^.^.......^.^.......^.^.^.^.....^...........^.^.^...^.^...^.......",
                        ".............................................................................................................................................",
                        "......^.^.^.^.^.^...^.^...^.^.^.^.....^.....^.^...^...^.^.^.....^...^.^.....^.^.^.^...^.^.^.^.....^...^.^.....^...^.......^.....^.....^......",
                        ".............................................................................................................................................",
                        ".....^.^.^...^.^.^.^.^.^.^...^.^...^.^.^.^.^.^.......^.^.^...^.........^.....^...^.^.^.^.........^.^.......^.^...^...^.^.^.....^.^...^.^.....",
                        ".............................................................................................................................................",
                        "....^...^.^.^.^.^.^.^.^.^.^...^.^...^.^...^.^.^.^.^.....^.^.......^.^...^.^...^.^.^.^.....^.^.^.....^.^...^.....^.^.^.^.^.........^.....^....",
                        ".............................................................................................................................................",
                        "...^.^.^.^...^...^.........^.^.^.^.^.^.^.^.^.^...^...........^.^...^...^.......^...^.^.^.^.^...^.^.^.^.......^.^...^.^...^.^.^.....^...^.^...",
                        ".............................................................................................................................................",
                        "..^.......^.......^.^.^...^.^.^.^.^.^.......^...^.^...^.^...^.^.^...^.^.....^...^.^.^.^.^...^...^...^.^.^.^.........^.^...^.^.^.^.^.^...^.^..",
                        ".............................................................................................................................................",
                        ".^.^.^.^.^.^.^.^.........^.........^...^.^.^.^...^...^.....^.......^...^.........^.^.^.^.^.^.^.^.^.^...^.^.^.^.......^.^.^...^.^.^.^.^.^...^.",
                        "............................................................................................................................................."
        };
        System.out.println(countSplits(example));

    }

}
